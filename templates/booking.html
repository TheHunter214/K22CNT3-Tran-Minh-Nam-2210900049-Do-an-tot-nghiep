{% extends 'layout.html' %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/booking.css') }}">

<div class="booking-container">

    <!-- HEADER -->
    <div class="booking-header">
        <div class="movie-poster">
        <img src="{{ url_for('static', filename='images/' + movie.poster_image) }}" alt="{{ movie.title }}">
        </div>
        <script src="{{ url_for('static', filename='js/booking.js') }}"></script> 

        
        <div class="booking-info">
            <h2>{{ movie.title }}</h2>
            <div class="details">
                <span>‚≠ê {{ movie.rating or '8.5' }}</span>
                <span>‚è± {{ movie.duration }} ph√∫t</span>
            </div>
        </div>
    </div>

    <div class="booking-layout">

        <!-- MAIN -->
        <div class="booking-main">

            <!-- SU·∫§T CHI·∫æU -->
            <div class="booking-section">
                <div class="section-title">üïí Ch·ªçn Su·∫•t Chi·∫øu</div>
                <div class="showtimes-grid">
                    {% for s in showtimes %}
                    <button class="showtime-btn"
                        onclick="selectShowtime(this)"
                        data-id="{{ s.id }}"
                        data-price="{{ s.price }}"
                        data-room="{{ s.screen_name }}"
                        data-cinema="{{ s.cinema_name }}">
                        <div class="time-hour">{{ s.start_time.strftime('%H:%M') }}</div>
                        <div class="time-info">{{ s.start_time.strftime('%d/%m') }}</div>
                    </button>
                    {% endfor %}
                </div>
                <p id="room-info" class="success-badge" style="display:none;"></p>
            </div>

            <!-- GH·∫æ -->
            <div class="booking-section">
                <div class="section-title">üí∫ Ch·ªçn Gh·∫ø</div>
                <div class="screen">M√ÄN H√åNH</div>
                <div id="seats-grid" class="seats-grid">
                    <p style="grid-column:1/-1;text-align:center;color:#777">
                        Vui l√≤ng ch·ªçn su·∫•t chi·∫øu
                    </p>
                </div>
            </div>

            <!-- COMBO -->
            <div class="booking-section">
                <div class="section-title">üçø ƒê·ªì ƒÉn & Combo</div>
                <div id="combo-list" class="combo-list">
                    <!-- JS render -->
                </div>
            </div>
        </div>   
        <!-- SIDEBAR -->
        <div class="booking-sidebar">
            <div class="order-summary">
                <div class="summary-title">üßæ T√≥m T·∫Øt ƒê∆°n H√†ng</div>

                <div class="summary-item">
                    <span id="bill-seat-text">V√© (0 gh·∫ø)</span>
                    <span id="bill-seat-price">0‚Ç´</span>
                </div>

                <div class="summary-item">
                    <span>Combo b·∫Øp n∆∞·ªõc</span>
                    <span id="bill-combo-price" class="fw-bold">0‚Ç´</span>
                </div>

                <div class="summary-divider"></div>

                <div class="summary-item total">
                    <span>T·ªîNG C·ªòNG</span>
                    <span id="total-amount" style="color: #e74c3c; font-size: 1.5rem;">0‚Ç´</span>
                </div>

                <div class="booking-actions">
                    <button class="btn-payment" onclick="checkout()">THANH TO√ÅN</button>
                    <button class="btn-back" onclick="history.back()">Quay v·ªÅ</button>
                </div>
            </div>
        </div>

    </div>
</div>
<!-- JS -->
<script src="{{ url_for('static', filename='js/booking.js') }}"></script>
{% endblock %}
